git<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=600,user-scalable=no">

</head>
<style>
    html,body {
        margin: 0;
        padding: 0;
    }
    .va{
        margin:auto;
        display:block;
    }
</style>
<canvas id="m" class="va" width="600px" height="800px" style="background:black"></canvas>
<script>
    let c = document.getElementById("m");
    let r = c.getContext("2d");
    r.font = 'bold 30px arial';
    let s, u, o, m, p;
    let a = 5;
    let h = 28;
    let b = [];
    b[0] = {
        x: 200,
        y: 150,
        width: 200
    };
    let l = {
        x: 0,
        width: 0
    };

    function nb() {
        b[o] = {
            x: 0,
            y: (o + 10) * h,
            width: b[o - 1].width
        };
    }

    function go() {
        m = 'gO';
        r.clearRect(0, 0, c.width, c.height);
        r.fillText('Score: ' + (o - 1).toString(), 225, 50);
        r.fillText('Game over!', 210, 380);
    }

    function an() {
        if (m != 'gO') {
            r.clearRect(0, 0, c.width, c.height);
            r.fillText('Score: ' + (o - 1).toString(), 225, 50);
            for (let n = 0; n < b.length; n++) {
                let box = b[n];
                r.fillRect(box.x, 600 - box.y + u, box.width, h);
            }
            r.fillStyle = 'white';
            r.fillRect(l.x, 600 - l.y + u, l.width, h);
            if (m == 'bounce') {
                b[o].x = b[o].x + p;
                if (p > 0 && b[o].x + b[o].width > c.width)
                    p = -p;
                if (p < 0 && b[o].x < 0)
                    p = -p;
            }
            if (m == 'fall') {
                b[o].y = b[o].y - a;
                if (b[o].y == b[o - 1].y + h) {
                    m = 'bounce';
                    let d = b[o].x - b[o - 1].x;
                    if (Math.abs(d) >= b[o].width) {
                        go();
                    }
                    l = {
                        y: b[o].y,
                        width: d
                    };
                    if (b[o].x > b[o - 1].x) {
                        b[o].width = b[o].width - d;
                        l.x = b[o].x + b[o].width;
                    } else {
                        l.x = b[o].x - d;
                        b[o].width = b[o].width + d;
                        b[o].x = b[o - 1].x;
                    }
                    if (p > 0)
                        p++;
                    else
                        p--;
                    o++;
                    s = h;
                    nb();
                }
            }
            l.y = l.y - a;
            if (s) {
                u++;
                s--;
            }
        }
        window.requestAnimationFrame(an);
    }

    function j() {
        b.splice(1, b.length - 1);
        m = 'bounce';
        u = 0;
        s = 0;
        p = 2;
        o = 1;
        nb();
        l.y = 0;
    }

    c.onpointerdown = function() {
        if (m == 'gO')
            j();
        else {
            if (m == 'bounce')
                m = 'fall';
        }
    };

    j();
    an();
</script>
</html>
